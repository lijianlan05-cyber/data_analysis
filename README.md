# 网络监测数据分析与可视化期末项目

## 项目概述

本项目基于某互联网高科技公司2017年11月的企业日志数据，进行网络安全态势感知分析与可视化。项目聚焦研发、财务、人力三大部门的内部网络安全态势感知，挖掘潜在的信息泄露、网络威胁等安全问题。

**数据集说明：**
- **时间范围**：2017-11-01 至 2017-11-30（30天）
- **数据规模**：约120MB CSV格式数据
- **数据类型**：
  - Login.csv - 登录日志（SSH、FTP、MySQL等协议）
  - Weblog.csv - 网页访问日志
  - Tcplog.csv - TCP连接日志
  - Email.csv - 邮件传输日志
  - Checking.csv - 员工打卡记录

## 项目结构

```
期末/
├── analysis/                    # 数据分析模块
│   ├── data_processor.py       # 核心数据处理脚本
│   ├── requirements.txt        # Python依赖
│   └── output/                 # 分析结果输出目录
│
├── visualization/              # 可视化Web应用
│   ├── src/
│   │   ├── components/        # React组件
│   │   │   ├── LoginSecurityChart.jsx      # 登录安全分析图表
│   │   │   ├── NetworkTrafficChart.jsx     # 网络流量分析图表
│   │   │   ├── EmployeeBehaviorChart.jsx   # 员工行为分析图表
│   │   │   ├── ThreatDetectionPanel.jsx    # 威胁检测面板
│   │   │   ├── NetworkTopology.jsx         # 网络拓扑图
│   │   │   ├── TimelineAnalysis.jsx        # 时间线分析
│   │   │   ├── AdditionalCharts.jsx        # 扩展图表组件
│   │   │   └── AdvancedAnalysisCharts.jsx  # 高级分析图表组件
│   │   ├── App.jsx            # 主应用组件
│   │   ├── main.jsx           # 入口文件
│   │   └── index.css          # 样式文件
│   ├── package.json           # Node.js依赖
│   └── vite.config.js         # Vite配置
│
├── 选题二——企业日志数据/      # 原始数据目录
│   ├── 2017-11-01/
│   ├── 2017-11-02/
│   └── ...
│
├── 系统设计方案.md             # 网络安全管理系统设计
├── 分析报告.md                 # 详细分析报告
├── 使用说明.md                 # 详细使用指南
└── README.md                   # 本文件
```

## 快速开始

### 1. 数据分析

**环境要求：**
- Python 3.8+
- pandas, numpy, matplotlib等库

**运行步骤：**

```bash
# 进入分析目录
cd analysis

# 安装依赖
pip install -r requirements.txt

# 运行数据分析
python data_processor.py
```

**输出结果：**
- `output/login_security_analysis.json` - 登录安全分析结果
- `output/employee_behavior_analysis.json` - 员工行为分析结果
- `output/network_traffic_analysis.json` - 网络流量分析结果
- `output/security_threats.json` - 安全威胁检测结果
- `output/visualization_data.json` - 可视化数据
- `output/analysis_summary.json` - 分析摘要

### 2. 可视化系统

**环境要求：**
- Node.js 16+
- npm 或 yarn

**运行步骤：**

```bash
# 进入可视化目录
cd visualization

# 安装依赖
npm install

# 启动开发服务器
npm run dev
```

访问 http://localhost:3000 查看可视化系统。

**构建生产版本：**

```bash
npm run build
```

## 研究问题与分析

### 问题1：员工异常登录行为检测与安全威胁分析

**研究目标：**
- 识别非法/异常登录行为，挖掘潜在的账号盗用、暴力破解等威胁
- 检测跨部门/非权限范围内的登录行为

**分析方法：**
- 不同协议（SSH、FTP、MySQL等）登录成功率/失败率统计
- 登录时间分布分析，识别非工作时间异常登录
- 跨部门登录行为检测（如财务人员登录研发服务器）

**可视化方法：**
| 可视化维度 | 编码方式 | 图表类型 | 交互方式 |
|-----------|---------|---------|---------|
| 登录时间分布 | X轴=小时、Y轴=登录次数 | 堆叠柱状图（成功/失败）| 悬停显示具体数值 |
| 失败登录统计 | X轴=账户、Y轴=失败次数 | 横向柱状图 | 点击账户查看详情 |
| 非工作时段登录 | 颜色（红=非工作、绿=工作）| 热力图（X=日期、Y=账户）| 筛选非工作时段 |
| 登录协议占比 | 扇形角度+颜色 | 饼图 | 点击协议类型筛选 |
| 跨部门登录 | 节点=部门、边=登录流向 | 桑基图+详情表格 | 缩放/拖拽节点 |

### 问题2：员工行为异常与泄密风险分析

**研究目标：**
- 从网页访问、打卡、TCP连接等维度识别员工异常行为及泄密风险
- 识别异常缺勤、长时间离岗但网络活跃的行为

**分析方法：**
- 员工打卡时间与工作时长分析，识别未打卡但网络活跃的异常行为
- 网页访问日志分析，统计外部敏感网站（网盘、社交平台）访问频率
- TCP连接时长/流量分析，识别异常长连接、大流量传输

**可视化方法：**
| 可视化维度 | 编码方式 | 图表类型 | 交互方式 |
|-----------|---------|---------|---------|
| 工作时长分布 | X轴=时长区间、Y轴=人数 | 直方图 | 筛选部门/日期 |
| 网页访问类别 | 扇形角度+颜色 | 环形图（工作/外部/敏感）| 点击类别查看具体 |
| 敏感网站访问 | X轴=网站类型、Y轴=访问次数 | 分组柱状图+饼图 | 点击查看TOP用户 |
| TCP大流量传输 | X轴=日期、Y轴=传输次数 | 折线图（标注阈值线）| 筛选员工/部门 |
| 员工行为热力图 | 颜色深浅=行为活跃程度 | 热力图（X=小时、Y=星期）| 筛选异常行为标签 |
| 未打卡但活跃 | 表格+柱状图 | 分组柱状图+详情表格 | 按风险等级筛选 |

### 问题3：企业组织与业务维度安全态势分析

**研究目标：**
- 结合部门属性、邮件内容、业务关键词，分析各部门业务特征及潜在安全风险
- 识别含敏感关键词的邮件及与陌生/高危域名的邮件交互风险

**分析方法：**
- 基于邮件日志的部门沟通特征分析，识别敏感关键词（离职、机密、数据）
- 各部门网络行为特征对比，挖掘偏离部门常规行为的异常
- 邮件收发的外部域名分布，检测与陌生/高危域名的邮件交互风险

**可视化方法：**
| 可视化维度 | 编码方式 | 图表类型 | 交互方式 |
|-----------|---------|---------|---------|
| 部门行为特征 | 多维指标 | 雷达图 | 切换部门对比 |
| 部门异常统计 | X轴=部门、Y轴=异常数 | 柱状图 | 点击查看详情 |
| 邮件关键词匹配 | 颜色（红=敏感、蓝=普通）| 柱状图 | 点击关键词查看邮件 |
| 外部域名风险 | X轴=域名、Y轴=邮件数 | 柱状图（颜色标风险）| 筛选风险等级 |
| 垃圾邮件来源 | 扇形角度 | 饼图 | 点击查看详情 |
| 员工邮件沟通网络 | 节点=员工、边=邮件交互 | 力导向图 | 缩放/拖拽/筛选部门 |

### 问题4：网络流量异常与攻击风险分析

**研究目标：**
- 从TCP连接日志挖掘流量异常，识别DDoS攻击、数据外泄等威胁
- 分析每日/每小时流量趋势，识别流量突增/突降的异常时段

**分析方法：**
- 每日/每小时TCP流量趋势分析
- 异常大流量连接检测（单次连接流量远超均值）
- 各协议流量占比统计，识别非业务核心协议的异常占比

**可视化方法：**
| 可视化维度 | 编码方式 | 图表类型 | 交互方式 |
|-----------|---------|---------|---------|
| 每日流量趋势 | X轴=日期、Y轴=流量值 | 面积图（标注阈值线）| 筛选协议类型 |
| 每小时流量趋势 | X轴=小时、Y轴=流量值 | 折线图+柱状图 | 标注高峰时段 |
| 协议流量占比 | 扇形角度+颜色 | 饼图 | 点击协议类型查看详情 |
| 异常流量连接 | X轴=流量、Y轴=连接数 | 散点图（颜色标风险等级）| 筛选异常流量阈值 |
| 网络拓扑 | 节点=IP、边=连接 | 力导向图 | 缩放/拖拽/高亮异常 |

## 可视化设计

### 设计原则

1. **清晰性**：使用直观的图表类型，避免信息过载
2. **交互性**：提供筛选、缩放、详情查看等交互功能
3. **响应式**：适配不同屏幕尺寸
4. **色彩编码**：使用一致的颜色方案（红色=危险，橙色=警告，绿色=正常）

### 可视化编码方法

| 数据维度 | 编码方式 | 图表类型 |
|---------|---------|---------|
| 时间分布 | X轴位置 | 折线图、柱状图 |
| 数值大小 | Y轴位置、面积 | 柱状图、面积图 |
| 分类数据 | 颜色、扇形角度 | 饼图、环形图 |
| 关系网络 | 节点-边布局 | 力导向图 |
| 二维密度 | 颜色深浅 | 热力图 |
| 严重程度 | 颜色（红/橙/蓝） | 标签、图标 |

### 交互方式

- **悬停提示**：显示详细数值和说明
- **点击筛选**：按类别、时间等维度筛选数据
- **缩放平移**：网络拓扑图支持缩放和拖拽
- **表格排序**：威胁列表支持多列排序和筛选
- **标签页切换**：不同分析视角的快速切换

## 技术栈

### 数据分析
- **Python 3.8+**
- **Pandas** - 数据处理
- **NumPy** - 数值计算
- **Matplotlib/Seaborn** - 静态图表（可选）

### 可视化系统
- **React 18** - UI框架
- **Vite** - 构建工具
- **ECharts** - 图表库
- **Ant Design** - UI组件库
- **TailwindCSS** - 样式框架
- **Lucide React** - 图标库

## 系统功能模块

### 功能菜单

| 菜单项 | 功能说明 | 对应研究问题 |
|-------|---------|-------------|
| 总览 | 安全态势仪表盘，关键指标展示 | 综合 |
| 登录安全 | 登录时间分布、协议统计、失败登录TOP10、非工作时段热力图 | 问题1 |
| 跨部门登录 | 跨部门登录检测，桑基图+详情表格 | 问题1 |
| 网络流量 | 每日/每小时流量趋势、协议占比、异常流量散点图 | 问题4 |
| 员工行为 | 工作时长、网站访问、行为热力图、未打卡但活跃检测 | 问题2 |
| 敏感访问 | 敏感网站（网盘/社交/求职）访问分析 | 问题2 |
| 邮件风险 | 外部域名风险分析、垃圾邮件来源统计 | 问题3 |
| 部门对比 | 研发/财务/人力部门行为雷达图对比 | 问题3 |
| 威胁检测 | 威胁类型分布、严重程度统计、风险等级饼图 | 综合 |
| 时间线分析 | 安全事件时间线展示 | 综合 |

## 分析结果摘要

### 关键发现

1. **登录安全（问题1）**
   - 登录失败率：15.6%
   - 检测到暴力破解尝试：12个账户
   - 非工作时间登录占比：8.3%
   - 跨部门异常登录：5条记录

2. **员工行为（问题2）**
   - 平均工作时长：9.2小时
   - 外部网站访问占比：32.5%
   - 敏感网站（网盘/社交）访问：1,403次
   - 未打卡但网络活跃员工：7人

3. **企业组织（问题3）**
   - 垃圾邮件数量：1,247封
   - 高危外部域名邮件：35封
   - 部门异常行为：研发12起、财务8起、人力3起

4. **网络流量（问题4）**
   - 总流量：458.67 GB
   - 流量高峰：工作日9-18点
   - 异常大流量IP：15个
   - 高危流量连接：8个

5. **安全威胁（综合）**
   - 总威胁数：47个
   - 高危威胁：12个
   - 中危威胁：28个
   - 低危威胁：7个

## 系统设计

详见 `系统设计方案.md`，包含：
- 系统整体架构
- 数据采集模块
- 数据传输接口
- 功能模块说明
- 部署方案

## 评估与改进

### 优点

1. **全面性**：覆盖登录安全、员工行为、企业组织、网络流量四大维度，完整解决实验提出的12个分析方向
2. **多维度分析**：支持跨部门登录检测、敏感网站访问分析、邮件风险评估等深度分析
3. **交互性**：丰富的交互功能（悬停提示、点击筛选、缩放拖拽、表格排序）提升用户体验
4. **可视化多样性**：包含20+种图表类型（柱状图、饼图、热力图、散点图、桑基图、雷达图、力导向图等）
5. **风险分级**：采用红/橙/蓝三级风险标识，直观展示威胁严重程度
6. **可扩展性**：模块化设计便于功能扩展

### 可视化方案对比

| 方案 | 优点 | 缺点 | 适用场景 |
|------|------|------|---------|
| 静态图表(Matplotlib) | 生成快、适合报告 | 无交互、体验差 | 论文、报告 |
| Web可视化(ECharts) | 交互丰富、美观 | 需服务器 | 实时监控（本项目采用）|
| BI工具(Tableau) | 分析强大、易用 | 成本高、定制差 | 企业级BI |
| 自定义D3.js | 完全自定义 | 开发成本高 | 特殊需求 |

### 待完善方面

1. **机器学习**：引入异常检测算法（如Isolation Forest、LSTM）
2. **实时告警**：添加实时威胁告警推送功能（WebSocket）
3. **历史对比**：支持不同时间段的数据对比分析
4. **报表导出**：支持PDF/Excel格式的报告导出
5. **用户权限**：添加多角色权限管理（管理员/运维/普通用户）
6. **数据关联**：增强多维度数据的关联分析能力

## 实验需求覆盖率

| 研究问题 | 分析方向数 | 已实现 | 覆盖率 |
|---------|-----------|--------|-------|
| 问题1：员工异常登录行为检测 | 3 | 3 | 100% |
| 问题2：员工行为异常与泄密风险 | 3 | 3 | 100% |
| 问题3：企业组织与业务维度分析 | 3 | 3 | 100% |
| 问题4：网络流量异常与攻击风险 | 3 | 3 | 100% |
| **合计** | **12** | **12** | **100%** |

