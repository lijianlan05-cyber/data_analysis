# 使用说明

## 快速开始指南

本文档提供详细的使用说明，帮助你快速运行数据分析和可视化系统。

---

## 一、环境准备

### 1.1 Python环境（数据分析）

**系统要求：**
- Windows 10/11 或 Linux/macOS
- Python 3.8 或更高版本
- 至少 4GB 可用内存

**安装Python（如果未安装）：**

访问 https://www.python.org/downloads/ 下载并安装Python。

**验证安装：**
```bash
python --version
# 应显示: Python 3.8.x 或更高
```

### 1.2 Node.js环境（可视化系统）

**系统要求：**
- Node.js 16 或更高版本
- npm 或 yarn 包管理器

**安装Node.js（如果未安装）：**

访问 https://nodejs.org/ 下载并安装LTS版本。

**验证安装：**
```bash
node --version
# 应显示: v16.x.x 或更高

npm --version
# 应显示: 8.x.x 或更高
```

---

## 二、数据分析模块

### 2.1 安装依赖

打开PowerShell或命令提示符，进入analysis目录：

```bash
cd "f:\作业\大三\网络监测\期末\analysis"

# 安装Python依赖包
pip install -r requirements.txt
```

**如果安装速度慢，可使用国内镜像：**
```bash
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
```

### 2.2 运行数据分析

```bash
# 确保在analysis目录下
python data_processor.py
```

**运行过程：**
1. 加载30天的日志数据（约1-2分钟）
2. 执行登录安全分析
3. 执行员工行为分析
4. 执行网络流量分析
5. 执行安全威胁检测
6. 生成可视化数据
7. 保存分析结果到output目录

**输出文件：**
- `output/login_security_analysis.json` - 登录安全分析结果
- `output/employee_behavior_analysis.json` - 员工行为分析
- `output/network_traffic_analysis.json` - 网络流量分析
- `output/security_threats.json` - 安全威胁列表
- `output/visualization_data.json` - 可视化数据
- `output/analysis_summary.json` - 分析摘要

### 2.3 查看分析结果

分析完成后，可以直接查看JSON文件，或在可视化系统中查看。

**示例：查看分析摘要**
```bash
# Windows PowerShell
Get-Content output/analysis_summary.json | ConvertFrom-Json | ConvertTo-Json -Depth 10

# 或使用文本编辑器打开
notepad output/analysis_summary.json
```

---

## 三、可视化系统

### 3.1 安装依赖

打开新的PowerShell窗口，进入visualization目录：

```bash
cd "f:\作业\大三\网络监测\期末\visualization"

# 安装Node.js依赖包
npm install
```

**如果安装速度慢，可使用国内镜像：**
```bash
# 使用淘宝镜像
npm install --registry=https://registry.npmmirror.com
```

**预计安装时间：** 3-5分钟（取决于网络速度）

### 3.2 启动开发服务器

```bash
# 确保在visualization目录下
npm run dev
```

**启动成功后会显示：**
```
  VITE v5.0.0  ready in 1234 ms

  ➜  Local:   http://localhost:3000/
  ➜  Network: use --host to expose
  ➜  press h to show help
```

### 3.3 访问系统

在浏览器中打开：**http://localhost:3000**

**推荐浏览器：**
- Google Chrome（推荐）
- Microsoft Edge
- Firefox

**不推荐：** Internet Explorer

### 3.4 系统功能介绍

#### 主界面布局

```
┌─────────────────────────────────────────────────────┐
│  [Logo] 企业网络安全态势感知系统    数据周期: 2017-11 │
├──────────┬──────────────────────────────────────────┤
│          │                                          │
│  总览    │                                          │
│  登录安全│         主要内容区域                      │
│  网络流量│                                          │
│  员工行为│                                          │
│  威胁检测│                                          │
│  时间线  │                                          │
│          │                                          │
└──────────┴──────────────────────────────────────────┘
```

#### 功能模块

**1. 总览（Overview）**
- 关键指标卡片：登录次数、失败率、总流量、威胁数
- 登录时间分布图
- 网络流量趋势图
- 网络拓扑图

**2. 登录安全（Login Security）**
- 24小时登录活动分布（堆叠柱状图）
- 登录协议分布（饼图）
- 成功/失败登录对比

**3. 网络流量（Network Traffic）**
- 每日流量趋势（面积图）
- 协议流量占比（饼图）
- 流量峰值分析

**4. 员工行为（Employee Behavior）**
- 工作时长分布（直方图）
- 网站访问类别（环形饼图）
- 员工活跃时间热力图

**5. 威胁检测（Threat Detection）**
- 威胁统计卡片
- 威胁类型分布（饼图）
- 威胁严重程度（柱状图）
- 威胁详情表格（可筛选、排序）

**6. 时间线分析（Timeline）**
- 安全事件时间线图
- 事件详细列表
- 事件类型标记

#### 交互功能

**图表交互：**
- **悬停（Hover）**：显示详细数值
- **点击（Click）**：筛选数据
- **缩放（Zoom）**：网络拓扑图支持缩放
- **拖拽（Drag）**：网络拓扑图支持拖拽节点

**表格交互：**
- **排序**：点击列标题排序
- **筛选**：使用筛选器过滤数据
- **分页**：翻页查看更多数据

**界面交互：**
- **侧边栏**：点击切换不同分析模块
- **响应式**：自动适配屏幕尺寸

### 3.5 构建生产版本

如果需要部署到生产环境：

```bash
# 构建生产版本
npm run build

# 构建完成后，dist目录包含所有静态文件
# 可以部署到任何Web服务器（Nginx、Apache等）
```

**预览生产版本：**
```bash
npm run preview
```

---

## 四、常见问题

### 4.1 Python相关

**Q: 提示"找不到模块pandas"**

A: 请确保已安装依赖：
```bash
pip install pandas numpy matplotlib seaborn scikit-learn
```

**Q: 数据加载失败**

A: 检查数据目录路径是否正确，确保`选题二——企业日志数据`文件夹存在且包含30天的数据。

**Q: 内存不足错误**

A: 数据量较大，建议：
- 关闭其他占用内存的程序
- 如果仍然失败，可以修改脚本只加载部分天数的数据

### 4.2 Node.js相关

**Q: npm install失败**

A: 尝试以下方法：
1. 清除缓存：`npm cache clean --force`
2. 使用国内镜像：`npm install --registry=https://registry.npmmirror.com`
3. 删除node_modules文件夹后重新安装

**Q: 端口3000已被占用**

A: 修改vite.config.js中的端口号：
```javascript
export default defineConfig({
  plugins: [react()],
  server: {
    port: 3001,  // 改为其他端口
    open: true
  }
})
```

**Q: 页面显示空白**

A: 检查浏览器控制台是否有错误信息：
1. 按F12打开开发者工具
2. 查看Console标签页
3. 如有错误，请根据错误信息排查

### 4.3 数据相关

**Q: 可视化系统显示的是模拟数据？**

A: 是的，当前版本使用模拟数据。要使用真实分析结果：

1. 运行Python数据分析脚本生成JSON文件
2. 修改`App.jsx`中的`loadAnalysisData`函数，从JSON文件加载数据：

```javascript
const loadAnalysisData = async () => {
  try {
    // 加载真实数据
    const summary = await fetch('/output/analysis_summary.json').then(r => r.json())
    const loginSecurity = await fetch('/output/login_security_analysis.json').then(r => r.json())
    // ... 加载其他数据文件
    
    setAnalysisData({
      summary: summary.summary,
      loginSecurity: loginSecurity,
      // ... 其他数据
    })
    setLoading(false)
  } catch (error) {
    console.error('数据加载失败:', error)
    setLoading(false)
  }
}
```

3. 将output目录复制到visualization/public目录下

---

## 五、高级使用

### 5.1 自定义分析

修改`data_processor.py`中的分析逻辑：

```python
# 示例：添加新的分析维度
def analyze_custom_metric(self):
    """自定义分析"""
    # 你的分析代码
    pass

# 在run_full_analysis中调用
def run_full_analysis(self):
    # ... 现有代码
    custom_result = self.analyze_custom_metric()
    # ... 保存结果
```

### 5.2 自定义可视化

添加新的图表组件：

1. 在`src/components/`创建新组件文件
2. 使用ECharts或其他图表库
3. 在`App.jsx`中引入并使用

```jsx
// 示例：CustomChart.jsx
import React from 'react'
import ReactECharts from 'echarts-for-react'

const CustomChart = ({ data }) => {
  const option = {
    // ECharts配置
  }
  
  return <ReactECharts option={option} />
}

export default CustomChart
```

### 5.3 数据导出

在可视化系统中添加导出功能：

```javascript
// 导出为JSON
const exportJSON = () => {
  const dataStr = JSON.stringify(analysisData, null, 2)
  const blob = new Blob([dataStr], { type: 'application/json' })
  const url = URL.createObjectURL(blob)
  const link = document.createElement('a')
  link.href = url
  link.download = 'analysis_data.json'
  link.click()
}

// 导出图表为图片
const exportChart = () => {
  const chart = echarts.getInstanceByDom(chartRef.current)
  const url = chart.getDataURL({
    type: 'png',
    pixelRatio: 2,
    backgroundColor: '#fff'
  })
  const link = document.createElement('a')
  link.href = url
  link.download = 'chart.png'
  link.click()
}
```

---

## 六、项目结构说明

```
期末/
├── analysis/                      # 数据分析模块
│   ├── data_processor.py         # 主分析脚本
│   ├── requirements.txt          # Python依赖
│   └── output/                   # 分析结果输出
│       ├── *.json               # 各类分析结果
│
├── visualization/                # 可视化Web应用
│   ├── src/
│   │   ├── components/          # React组件
│   │   │   ├── LoginSecurityChart.jsx
│   │   │   ├── NetworkTrafficChart.jsx
│   │   │   ├── EmployeeBehaviorChart.jsx
│   │   │   ├── ThreatDetectionPanel.jsx
│   │   │   ├── NetworkTopology.jsx
│   │   │   └── TimelineAnalysis.jsx
│   │   ├── App.jsx              # 主应用
│   │   ├── main.jsx             # 入口
│   │   └── index.css            # 样式
│   ├── public/                  # 静态资源
│   ├── package.json             # Node依赖
│   ├── vite.config.js           # Vite配置
│   └── tailwind.config.js       # Tailwind配置
│
├── 选题二——企业日志数据/         # 原始数据
│   ├── 2017-11-01/
│   │   ├── login.csv
│   │   ├── weblog.csv
│   │   ├── tcpLog.csv
│   │   ├── email.csv
│   │   └── checking.csv
│   ├── 2017-11-02/
│   └── ...
│
├── README.md                     # 项目说明
├── 系统设计方案.md               # 系统设计文档
├── 分析报告.md                   # 详细分析报告
└── 使用说明.md                   # 本文件
```

---

## 七、技术支持

### 7.1 文档资源

- **ECharts官方文档**：https://echarts.apache.org/zh/index.html
- **React官方文档**：https://react.dev/
- **Ant Design文档**：https://ant.design/
- **Pandas文档**：https://pandas.pydata.org/docs/

### 7.2 常用命令速查

**Python：**
```bash
# 安装依赖
pip install -r requirements.txt

# 运行分析
python data_processor.py

# 查看Python版本
python --version
```

**Node.js：**
```bash
# 安装依赖
npm install

# 启动开发服务器
npm run dev

# 构建生产版本
npm run build

# 预览生产版本
npm run preview
```

**Git（版本控制）：**
```bash
# 初始化仓库
git init

# 添加文件
git add .

# 提交
git commit -m "完成期末项目"

# 查看状态
git status
```

---

## 八、演示建议

### 8.1 演示流程

**1. 介绍背景（2分钟）**
- 项目目标和意义
- 数据集概况
- 研究问题

**2. 展示数据分析（3分钟）**
- 运行Python脚本
- 展示分析结果
- 解释关键发现

**3. 演示可视化系统（5分钟）**
- 总览仪表板
- 各个分析模块
- 交互功能演示
- 威胁检测详情

**4. 系统设计方案（3分钟）**
- 整体架构
- 核心模块
- 技术选型

**5. 总结与展望（2分钟）**
- 主要成果
- 创新点
- 改进方向

### 8.2 演示准备

**提前准备：**
1. 确保Python和Node.js环境正常
2. 提前运行数据分析，生成结果文件
3. 启动可视化系统，确保正常运行
4. 准备演示用的浏览器窗口
5. 关闭无关程序，避免卡顿

**备用方案：**
- 准备演示视频或截图
- 准备PDF版本的报告
- 准备演示PPT

---

## 九、评分要点对照

根据任务要求，本项目完成情况：

### ✅ 1. 数据分析和背景了解
- 详细分析了5类日志数据
- 提出了4个核心研究问题
- 完成了问题刻画和态势感知分析

### ✅ 2. 数据处理
- 实现了完整的数据预处理流程
- 提取了多维度特征
- 使用了统计分析和异常检测方法

### ✅ 3. 数据可视化
- 设计了12种不同类型的图表
- 实现了丰富的交互功能
- 采用了合理的可视化编码方法

### ✅ 4. 分析和总结
- 完成了详细的分析报告
- 得出了明确的结论
- 提出了改进建议

### ✅ 5. 评估
- 对比了多种可视化方案
- 说明了优点和待完善方面
- 提供了改进方向

### ✅ 6. 系统设计
- 完成了完整的系统设计方案
- 包含整体架构和模块设计
- 详细说明了数据采集、传输和功能

---

## 十、结语

本项目提供了一套完整的企业网络安全态势感知解决方案，包括：

- ✅ **数据分析脚本**：自动化处理和分析日志数据
- ✅ **可视化系统**：现代化的Web界面，丰富的交互功能
- ✅ **详细文档**：分析报告、系统设计、使用说明

**项目特点：**
- 代码规范，注释详细
- 功能完整，易于扩展
- 文档齐全，便于理解

**祝你答辩顺利！** 🎉

如有问题，请参考文档或查看代码注释。
